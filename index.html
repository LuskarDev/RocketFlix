<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Não sabe o que assistir ?, Então de um click e veja uma bela sugestão">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&display=swap" rel="stylesheet"> 
    <title>Rocketflix</title>
</head>
<body>

    <section id="section">
        <div class="logo">
            <img src="images/logo.svg" alt="logo">
        </div>
        <h1>Não Sabe o que assistir ?</h1>

        <div class="c-movie">

           <figure>
            <img class="movie" src="" alt="">

            <figcaption>
            <p>Data de Lançamento <span class="date"></span> </p>
           </figcaption>
           </figure>

           
            <div class="movie-info">
                <h2 class="title"></h2>
                <span class="average"></span>
                <p class="descrition"></p>
            </div> 

        </div>

        <button onclick="getMovies(API_URL)"><img src="images/logo.svg" alt="logo"> Encontrar Filme</button>

        <p>Clique em "Encontrar Filme" que traremos informações de algum filme para você assistir hoje</p>
    </section>
    

    <script>
          const API_KEY = 'api_key=b4ccabfdfef893a61af093cc73e42525';
        const BASE_URL = 'https://api.themoviedb.org/3'

        const API_URL = BASE_URL + "/discover/movie?sort_by=popularity.desc&" + API_KEY;

        const IMG_URL = 'https://image.tmdb.org/t/p/original';

        const section = document.getElementById('section')

        const Cmovie = document.querySelector('.c-movie')

        const title = document.querySelector(".title")

        const description = document.querySelector(".descrition")

        const average = document.querySelector(".average")

        const movie = document.querySelector(".movie")

        const date = document.querySelector(".date")
         
        function getMovies(url){
            fetch(url).then(res => res.json()).then(data => {
                const setMovie = data.results[Math.floor(Math.random() * data.results.length - 1)];

                title.innerText = setMovie.title
                description.innerText = setMovie.overview
                average.innerText = setMovie.vote_average
                date.innerText = setMovie.release_date
                movie.style.backgroundImage = "url(" + IMG_URL + setMovie.poster_path + ")"
            })
        }
    </script>
</body>
</html>
